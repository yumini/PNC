<?php

namespace App\WebBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * CriterioVisitaRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class CriterioVisitaRepository extends EntityRepository
{
	public function findByCriterio($id,$idevaluador,$idinscripcion,$isArray=false){
		$em=$this->getEntityManager();
	        $dql   = "SELECT v,c,e,i FROM AppWebBundle:CriterioVisita v 
                        JOIN v.criterio c
                        JOIN v.evaluador e
                        JOIN v.inscripcion i
                        where c.id=:id
                        AND e.id=:idevaluador
                        AND i.id=:idinscripcion";
                $query = $em->createQuery($dql)
                        ->setParameter('id', $id)
                        ->setParameter('idevaluador', $idevaluador)
                        ->setParameter('idinscripcion', $idinscripcion);
                try {               	
                	return $query->getArrayResult();
                } catch (\Doctrine\ORM\NoResultException $e) {
                        return null;
                }
	}
        public function findArray($id){
                $em=$this->getEntityManager();
                $dql   = "SELECT v FROM AppWebBundle:CriterioVisita v WHERE v.id=:id";
                $query = $em->createQuery($dql)->setParameter('id', $id);
                try {                   
                        return $query->getArrayResult();
                } catch (\Doctrine\ORM\NoResultException $e) {
                        return null;
                }
        }
        public function findAllArray(){
                $em=$this->getEntityManager();
                $dql   = "SELECT v FROM AppWebBundle:CriterioVisita v";
                $query = $em->createQuery($dql);
                try {                   
                        return $query->getArrayResult();
                } catch (\Doctrine\ORM\NoResultException $e) {
                        return null;
                }
        }
}
